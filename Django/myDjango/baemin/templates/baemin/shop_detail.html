{% extends "baemin/base.html" %}
{% load django_bootstrap5 %}

{% block content %}
    <style>
        body {
            background-color: whitesmoke;
            font-family: 'Arial', sans-serif;
            padding: 30px;
        }
        .shop-info {
            background-color: #e6f7ff;
            border: 1px solid #b3e5fc;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
        }
        img {
            max-width: 500px;
            height: auto;
            display: block;
            margin-bottom: 15px;
        }
        .review {
            background-color: #f0f8ff;
            border-left: 5px solid #81d4fa;
            padding: 15px;
            margin-bottom: 15px;
        }
        a {
            color: #0288d1;
            text-decoration: none;
        }
    </style>

    <h1>{{ shop.name }}</h1>

    <div class="shop-info">
        <img src="{{ shop.photo.url }}" alt="{{ shop.name }} ì‚¬ì§„">
        <p><strong>ì„¤ëª…:</strong> {{ shop.description }}</p>
    </div>

    <h2>ë¦¬ë·° ëª©ë¡ ğŸ“</h2>
    {% for review in reviews %}
        <div class="review">
            <p><strong>í‰ì :</strong> {{ review.rating }} / 5</p>
            <p>{{ review.content }}</p>

            {# aíƒœê·¸ë¥¼ ë°”ë¡œ ì‘ì„±í•˜ì§€ ì•Šê³ , URLì„ ë¨¼ì € ì‘ì„±í•˜ëŠ” ì´ìœ ëŠ” #}
            {# ëŒ€ê°œ, URL ì‘ì„±ì—ì„œ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ì‹œëŠ” ë¶„ë“¤ì´ ë§ìŠµë‹ˆë‹¤. ì¸ì ì§€ì •ì— ì˜¤íƒ€ ë“±ì˜ ì´ìœ . #}
            <a href="/baemin/{{ shop.pk }}/reviews/{{ review.pk }}/edit/">ìˆ˜ì •</a>
            <a href="/baemin/{{ shop.pk }}/reviews/{{ review.pk }}/delete/" class="btn-review-delete text-danger">ì‚­ì œ</a>
        </div>
    {% empty %}
        <p>ì•„ì§ ë“±ë¡ëœ ë¦¬ë·°ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
    {% endfor %}

    <br>
    <a href="/baemin/">â† ëª©ë¡ìœ¼ë¡œ</a>
    <a href="/baemin/{{ shop.pk }}/reviews/new/"> &nbsp; ğŸ—’ï¸ë¦¬ë·°ì“°ê¸°</a>
    
    {% comment %}
    <script>
        const reviewWrapList = document.querySelectorAll(".review");
        
        reviewWrapList.forEach((wrapEl) => {
            console.log("wrapEl : ", wrapEl);
            const deleteBtnEl = wrapEl.querySelector(".btn-review-delete");
            deleteBtnEl.addEventListener("click", function(evet){
                event.preventDefault();
                
                if(confirm("ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")){
                    // ìœ ì €ê°€ OK(í™•ì¸) í–ˆë‹¤ë©´?
                    // TODO: ì§€ì • ì£¼ì†Œë¡œ POST ìš”ì²­ì„ ë³´ëƒ…ë‹ˆë‹¤.(ì‚­ì œìš”ì²­)
                    // const res = fetch("/baemin/{{ shop.pk }}/reviews/{{ review.pk }}/delete/");
                    // TODO: ì‚­ì œë¨ ì‘ë‹µì„ ë°›ìœ¼ë©´, window.location.reload(); ìƒˆë¡œê³ ì¹¨ì„ í•´ë„ ë˜ê³ ,
                    // JSë¡œ ì§€ì • wrapElì„ deleteí•´ë„ ë©ë‹ˆë‹¤.
                    wrapEl.remove();
                }
            });
        });
    </script>
    {% endcomment %}
{% endblock %}